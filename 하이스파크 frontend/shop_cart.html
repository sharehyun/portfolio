<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장바구니</title>
    <link rel="stylesheet" href="css/cart.css" />
    <link rel="stylesheet" href="css/base.css" />
    <link rel="icon" href="images/hispark_crop.png">
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
	<div id="header">
		
		<div id="snbBox">
			<a href="shop_main.html"><h1><img src="images/hispark_crop.png" alt="(로고)" /></h1></a>
			<div id="snb">
				<ul>
					<li><a href="#">로그인</a></li>
					<li><a href="#">회원가입</a></li>
					<li><a href="main.html">메인으로</a></li>
				</ul>

			</div>

            <!-- 우측 아이콘 -->
            <div class="hMenu hRight">
            <a href="shop_cart.html" class="cartWrapper">
                <img src="images/cart.png" style="width:29px;" />
                <span class="cartBadge">3</span> <!-- 나중에 JS로 동적 숫자 -->
            </a>
            <a href="mypage_shop.html"><img src="images/user.png" style="width:28px;" /></a>
        </div>
		</div>
	</div>
    


    <div class="mainBox">
        <div class="location">
            <ul>
                <li>홈</li>
                <li class="current">장바구니</li>
            </ul>
        </div>
        <div class="title">장바구니</div>
        <div class="orderStep">
            <ul>
                <li><span class="current">1. 장바구니</span></li>
                <li>2. 주문서작성</li>
                <li>3. 주문완료</li>
            </ul>
        </div>
        
        <div class="cart-content">
            <form action="shop_order.html" name="orderFrm" method="get">  <!--post로바꾸기-->

                <div class="pricebasketbox">
                    <div class="basketbox">
                        <div class="basket">
                            <!--상품당 table 하나-->
                            <!--품절아님(가격표시) / 품절(가격 대신 품절 표시)로 나눠서 -->
                            <table class="product-container">
                                <tr>
                                    <td rowspan="5" class="checkbox-cell">
                                        <input type="checkbox" value="1번 상품 id">
                                    </td>
                                    <td class="pd_img">
                                        <a>
                                            <img src="productimage/photocard.png" width="100px"/>
                                        </a>
                                    </td>
                                    <td class="product">
                                        <div class="description">
                                            <strong>HI-SRARK PHOTOCARD SET ver. 1 / 2</strong>
                                            <br>
                                            6,600원
                                            <br>
                                            <br>
                                            <span>배송: 3,000원 / 기본배송</span>
                                        </div>
                                        <div class="delete-btn">
                                            <img src="images/closebtn.png" width="20px"/>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="height:20px;"></tr>
                                <tr>
                                    <td colspan="2" class="optionselect">
                                        ㄴ 옵션 선택사항: ver.1
                                    </td>
                                </tr>
                                <tr>
                                    <td class="quantity-title">수량</td>
                                    <td class="countselect">
                                        <div class="quantity-control">
                                            <button type="button" class="quantity-btn">-</button>
                                            <input type="text" class="quantity-input" value="1" min="1" />
                                            <button type="button" class="quantity-btn">+</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="titleTd">주문금액</td>
                                    <td class="productprice">6,600원</td>
                                </tr>
                            </table>

                            <!-- 두 번째 상품 -->
                            <table class="product-container">
                                <tr>
                                    <td rowspan="5" class="checkbox-cell">
                                        <input type="checkbox" value="2번 상품 id">
                                    </td>
                                    <td class="pd_img">
                                        <a>
                                            <img src="productimage/acrylic_keyring_YUHYUN.png" width="100px"/>
                                        </a>
                                    </td>
                                    <td class="product">
                                        <div class="description">
                                            <strong>YUHYUN ACRYLIC KEYRING</strong>
                                            <br>
                                            24,000원
                                            <br>
                                            <br>
                                            <span>배송: 3,000원 / 기본배송</span>
                                        </div>
                                        <div class="delete-btn">
                                            <img src="images/closebtn.png" width="20px"/>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="height:20px;"></tr>
                                <tr>
                                    <td colspan="2" class="optionselect">
                                        ㄴ 옵션 선택사항: YUHYUN
                                    </td>
                                </tr>
                                <tr>
                                    <td class="quantity-title">수량</td>
                                    <td class="countselect">
                                        <div class="quantity-control">
                                            <button type="button" class="quantity-btn">-</button>
                                            <input type="text" class="quantity-input" value="2" min="1" />
                                            <button type="button" class="quantity-btn">+</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="titleTd">주문금액</td>
                                    <td class="productprice">24,000원</td>
                                </tr>
                            </table>
                            
                            <!-- 세 번째 상품 -->
                            <table class="product-container">
                                <tr>
                                    <td rowspan="5" class="checkbox-cell">
                                        <input type="checkbox" value="3번 장바구니상품 ID">
                                    </td>
                                    <td class="pd_img">
                                        <a>
                                            <img src="productimage/acrylic_keyring_JEONGHUN.png" width="100px"/>
                                        </a>
                                    </td>
                                    <td class="product">
                                        <div class="description">
                                            <strong>JEONGHUN ACRYLIC KEYRING</strong>
                                            <br>
                                            12,000원
                                            <br>
                                            <br>
                                            <span>배송: 3,000원 / 기본배송</span>
                                        </div>
                                        <div class="delete-btn">
                                            <img src="images/closebtn.png" width="20px"/>
                                        </div>
                                    </td>
                                </tr>
                                <tr style="height:20px;"></tr>
                                <tr>
                                    <td colspan="2" class="optionselect">
                                        ㄴ 옵션 선택사항: JEONGHUN
                                    </td>
                                </tr>
                                <tr>
                                    <td class="quantity-title">수량</td>
                                    <td class="countselect">
                                        <div class="quantity-control">
                                            <button type="button" class="quantity-btn">-</button>
                                            <input type="text" class="quantity-input" value="1" min="1" />
                                            <button type="button" class="quantity-btn">+</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="titleTd">주문금액</td>
                                    <td class="productprice">12,000원</td>
                                </tr>
                            </table>
                            
                            <!-- 전체 합계 (모든 상품 아래 하나만) -->
                            <table class="pricesum">
                                <tr>
                                    <td>
                                        [기본배송]<br>
                                        상품구매금액 42,600 + 배송비 3,000<br>
                                        합계 : 45,600원
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="action-buttons">
                            <button type="button" class="btn selectAll">전체선택</button>
                            <button type="button" class="btn deleteSelected">선택삭제</button>
                        </div>
                    </div>
                    
                    <div class="right-section">
                        <div class="pricecount">
                            <div class="productprice-sum">
                                <div>상품구매금액</div>
                                <div>42,600원</div>
                            </div>
                            <div class="productprice-sum">
                                <div>배송비</div>
                                <div>3,000원</div>
                            </div>
                            <div class="productprice-total">
                                <div>합계</div>
                                <div>45,600원</div>
                            </div>
                        </div>
                        
                        <div class="order-buttons">
                            <button type="button" class="btn order-btn">선택 주문하기</button>
                            <button onclick="orderAllBtn()" class="btn order-btn orderAll">전체 주문하기</button>
                        </div>
                    </div>
                </div>
            </form>
            
        </div>
    </div>

    

    <div id="footerWrap">
		<div id="footer">
			
			<div id="finfo">
				<div id="flogo"><img src="images/hispark.png" alt="하이스파크 로고" /></div>
				<address>
					<ul>
						<li>㈜스파크</li>
						<li>대표자 김슬비</li>
						<li class="tnone">주소 서울시 용산구 독서당로 111(한남더힐)</li>
						<li class="webnone">소비자상담실 02)123-4567</li>
						<li>사업자등록번호 012-345-6789</li>
						<li class="tnone">통신판매신고 제 강남 – 1160호</li>
						<li class="copy">COPYRIGHT © 2025 HI-SPARK <span>ALL RIGHTS RESERVED.</span></li>
					</ul>
				</address>

			</div>
            <div class="social-links">
                <a href="https://www.youtube.com/user/smtown/" class="youtube-button" target="_blank" rel="noopener noreferrer"></a>
                <a href="https://www.instagram.com/hispark__official/" class="instagram-button" target="_blank" rel="noopener noreferrer"></a>
                <a href="https://twitter.com/hispark5/" class="x-button" target="_blank" rel="noopener noreferrer"></a>
                <a href="https://www.facebook.com/smtown/" class="facebook-button" target="_blank" rel="noopener noreferrer"></a>
            </div>
		</div>
	</div>

</body>
</html>

<script>
    //전체주문버튼
    function orderAllBtn(){
        orderFrm.submit();
    }

    // 품목 삭제 버튼
    $(document).on("click",".delete-btn",function(){
        
        //가장 가까운 product-container 위치 변수 선언
        var productContainer = $(this).closest('.product-container');
        
        productContainer.remove(); //해당 컨테이너 삭제
        checkCartEmpty();//장바구니가 비어있는지 확인
        updatePrice();// 가격 업데이트
        
    });//delete-btn
    
    
    // 수량 조절 버튼
    $(document).on("click", ".quantity-btn", function(){
        var input = $(this).siblings('.quantity-input');  // 같은 레벨의 input 찾기
        var currentValue = parseInt(input.val());          // 현재 값 가져오기
        
        if ($(this).text() == '+') {
            input.val(currentValue + 1);
        } else if ($(this).text() == '-' && currentValue > 1) {
            input.val(currentValue - 1);
        }
    });//quantity-btn
    
    // 전체선택 버튼
    $(document).on("click", ".selectAll", function(){
        var checkBoxes = $('input[type="checkbox"]');     // 모든 체크박스 선택
        var allChecked = checkBoxes.filter(':checked').length == checkBoxes.length;  // 모두 체크되었나 확인
        
        checkBoxes.prop('checked', !allChecked); // 모두 체크되어있으면 체크 해제하기 
        if (allChecked) {
            $(this).text("전체선택");
        } else {
            $(this).text("선택해제");
        }
    });//selectall
    
    //선택삭제
    $(document).on("click",".deleteSelected", function(){
        var checkedBoxes = $('input[type="checkbox"]:checked');
        checkedBoxes.each(function(){
            $(this).closest('.product-container').remove();
        });
        
        checkCartEmpty();//장바구니가 비어있는지 확인
        updatePrice();// 가격 업데이트

    });//deleteSelected
    
    

    //장바구니 비어있는지 확인하는 함수
    function checkCartEmpty(){
        //장바구니 내 상품 개수 확인
        var productCount = $(".product-container").length;

        //상품 0개일 때 상품이 없습니다 html 변경
        if(productCount==0){
            $(".cart-content").html('<div class="empty-cart">상품이 없습니다</div>');
        }
    }//checkCartEmpty


    
    function updatePrice() {
        // 실제 가격 계산 로직 구현예정임
        console.log('가격 업데이트');
    }
</script>