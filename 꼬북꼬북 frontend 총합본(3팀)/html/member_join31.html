
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/955e8c2313.js" crossorigin="anonymous"></script>
    <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
    <link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-square.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/Share_AddGroup.css">
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <link rel="stylesheet" type="text/css" href="../css/join3.css">

    <title>사용자 정보 입력</title>
    
</head>
<!-- <body data-page="exchange"> -->
<body>
  <header class="fig-header">
    <nav class="fig-nav">
      <div class="fig-header-left">
        <a class="fig-one" href="/" rel="noreferrer">
          <h1 class="fig-logo">꼬북꼬북</h1>
          <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
            class="fig-exchangeimage">
            <path d="M4.5 7h15M4.5 12h15M4.5 17h15" stroke="#2D7868" stroke-width="1.3" stroke-linecap="round"
              stroke-linejoin="round"></path>
          </svg>
          <h4 class="fig-exchange-book">교환 독서</h4>
        </a>
      </div>

      <form role="search" class="fig-searchform et3830u0">
        <div tabindex="-1" class="fig-tabindex">
          <div class="fig-q3rd3s et3830u1">
            <label class="fig-formlabel">
              <svg width="1em" height="1em" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg"
                class="fig-searchimage">
                <path fill-rule="evenodd"
                  d="M13.28 8.18a5.1 5.1 0 11-10.2 0 5.1 5.1 0 0110.2 0zm-1.031 5.069a6.5 6.5 0 11.991-.989l4.695 4.695a.7.7 0 11-.99.99l-4.696-4.696z">
                </path>
              </svg>
              <span class="fig-instant">인스턴트 검색</span>
              <input type="text" maxlength="64" tabindex="-1" class="fig-forminput" value="">
            </label>
          </div>
        </div>
      </form>

      <div class="fig-right">
        <a href="" class="fig-r1">회원가입</a>
        <a href="" class="fig-r2">로그인</a>
      </div>

    </nav>
  </header>

  <hr class="fig-hr">
    <div class="fig-main">

        
        <div class="feed__content">
            
            <div class="feed__add">
                <div class="feed__add_title">
                    <span>사용자 정보 입력</span>
                </div>
                
                <form action="/" method="get" name="infoFrm">
                    <table class="group_table">
                        <tbody>
                            <tr>
                                <th>
                                    <label>이름</label>
                                    <span>*</span>
                                </th>
                                <td><input type="text" name="name" class="name" required></td>
                            </tr>
                            <tr>
                                <th>
                                    <label>아이디</label>
                                    <span>*</span>
                                </th>
                                <td>
                                  <input type="text" name="id" class="id" placeholder="영문,숫자,특수문자 사용 가능.">
                                  <button class="idch" id="checkIdBtn">중복 확인</button>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <label>비밀번호</label>
                                    <span>*</span>
                                </th>
                                <td>
                                  <input type="password" name="pw" class="pw" placeholder="영문,숫자,특수문자 사용 8자 이상." >
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <label>비밀번호 확인</label>
                                    <span>*</span>
                                </th>
                                <td><input type="password" name="pw2" class="pw2" placeholder="동일한 비밀번호 입력"></td>
                            </tr>
                            <tr>
                                <th>
                                    <label>이메일</label>
                                    <span>*</span>
                                </th>
                                <td>
                                  <input type="text" name="email1" class="email1" style="width:200px;">
                                  <p style="margin:10px;">@</p>
                                  <input type="text" name="email2" class="email2" style="width:200px;">
                                  <select class="email-select" style="margin-left:8px; width:200px; height:45px;">
                                    <option>직접입력</option>
                                    <option>gmail.com</option>
                                    <option>naver.com</option>
                                    <option>daum.net</option>
                                  </select>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <label>생년월일</label>
                                </th>
                                <td><input type="date" name="birth"></td>
                            </tr>
                            <tr>
                              <th>
                                <label>성별</label>
                              </th>
                              <td>
                                <div style="display: flex; align-items: flex-start; gap: 40px; margin-top: 2px;">
                                  <label style="display: flex; align-items: center; gap: 5px; font-weight: 400; color: #1a1a1a;">
                                    <input type="radio" class="gra" name="gender" value="남자" checked>
                                    남성
                                  </label>
                                  <label style="display: flex; align-items: center; gap: 5px; font-weight: 400; color: #1a1a1a;">
                                    <input type="radio" class="gra" name="gender" value="여자">
                                    여성
                                  </label>
                                </div>
                              </td>
                            </tr>
                            
                            <tr>
                                <th style="vertical-align: top;"><label>관심 분야</label></th>
                                <td>
                                    <div class="group_keyword">
                                        <div class="group_keyword_input">
                                            <input type="text" name="group_keyword_input" placeholder="직접 입력">
                                            <div class="add_tag_btn">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                        </div>
                                        <div class="group_keyword_output">
                                            <!-- 생성된 태그가 여기에 들어감 -->
                                        </div>
                                        <!-- 폼 제출용 hidden input -->
                                        <input type="hidden" name="group_keywords_hidden" id="group_keywords_hidden">
                                        <div class="tags">
                                            <a href="#">#소설</a>
                                            <a href="#">#시/에세이</a>
                                            <a href="#">#인문</a>
                                            <a href="#">#역사/문화</a>
                                            <a href="#">#종교</a>
                                            <a href="#">#가정/육아</a>
                                            <a href="#">#요리</a>
                                            <a href="#">#건강</a>
                                            <a href="#">#취미/실용/스포츠</a>
                                            <a href="#">#여행</a>
                                            <a href="#">#자기계발</a>
                                            <a href="#">#경제/경영</a>
                                            <a href="#">#정치/사회</a>
                                            <a href="#">#기술/공학</a>
                                            <a href="#">#과학</a>
                                            <a href="#">#외국어</a>
                                            <a href="#">#컴퓨터/IT</a>
                                            <a href="#">#취업/수험서</a>
                                            <a href="#">#대학교재</a>
                                            <a href="#">#유아(0~7세)</a>
                                            <a href="#">#어린이(초등)</a>
                                            <a href="#">#초등참고서</a>
                                            <a href="#">#청소년</a>
                                            <a href="#">#중/고등참고서</a>
                                            <a href="#">#예술/대중문화</a>
                                            <a href="#">#잡지</a>
                                            <a href="#">#만화</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            
                        </tbody>
                    </table>
                    <div class="group_button">
                      <button type="button" id="group_button_1">취소</button>
                      <button type="button" id="group_button_2">완료</button>
                    </div>
                  </form>
            </div>
        
        </div>          
    </div>
    
<!-- footer -->
    <div class="footerWrap">
    <div class="totalReview">
      <p>꼬북꼬북 모은 리뷰<span>15,738</span>개</p>
    </div>
    <!--리뷰수 아래 정보부분-->
    <div class="footer">
      <div class="footer-left">
        <p>(주) 꼬북꼬북</p>
        <div class="infoWrap">
          <ul>
            <li>대표자명: 꼬북이</li>
            <li>사업자등록번호: 123-45-67890</li>
            <li>통신판매업신고: 2025-하룰라라-01159</li>
            <li>이메일: support@ggo.book</li>
          </ul>
          <ul>
            <li>주소: 서울시 가산동 하룰라라로 궁전센터1차 123-01</li>
            <li>Tel : 02-1991-1120</li>
            <li>Fax : 02-1991-1120</li>
          </ul>
          <p>© 2025 꼬북꼬북 All rights reserved</p>
        </div>
        <div class="logos">
          <img src="../images/logos/notion_white.png" style="width:30px;">
          <img src="../images/logos/github_white.png" style="width:30px;">
          <img src="../images/logos/youtube_white.png" style="width:30px;">
        </div>
      </div>
      <div class="footer-right">
        <p>고객센터 1234-5678 (발신자 부담)</p>
        <div class="csWrap">
          <button class="ntcBtn">공지사항</button>
          <button class="inqBtn">1:1문의</button>
        </div>
        <table class="gitIds">
          <tbody>
            <tr>
              <td colspan="3">www.ggobookggobook.com</td>
            </tr>
            <tr>
              <td>이승민 @null4848</td>
              <td>김슬비 @kb4954</td>
              <td>김민성 @LatteMeng</td>
            </tr>
            <tr>
              <td>김혜원 @hwk3005</td>
              <td>신민철 @resader1</td>
              <td>공유현 @sharehyun</td>
            </tr>
          </tbody>
        </table>
        </div>
      </div>
    </div>
    <!--리뷰수 아래 정보부분-->
</body>







<!--                           script                          -->
<!-- 해시태그 기능 추가
    1) input에서 Enter로 태그 추가
    2) + 버튼 클릭으로 태그 추가
    3) 한글만 입력 가능
    4) 최대 8개까지만 추가 가능
    5) 중복 태그 방지
    6) 태그 삭제 가능
    7) 폼 제출용 hidden input에 자동 저장
    8) 태그 선택시 tags목록에도 hover유지
    9) 태그 삭제시 hover유지 취소
    10) 태그도 최대 8개까지만 hover유지, alert띄움

    에서
    선택 제한 삭제
    한글 제외한 문자도 입력 가능
     -->
  <script>
  const input = document.querySelector("input[name='group_keyword_input']");
  const addBtn = document.querySelector(".add_tag_btn");
  const outputArea = document.querySelector(".group_keyword_output");
  const hiddenInput = document.querySelector("#group_keywords_hidden");
  const tagLinks = document.querySelectorAll(".tags a");
  const addedTags = new Set();

  // hidden input에 저장
  function updateHiddenInput() {
    hiddenInput.value = Array.from(addedTags).join(",");
  }

  // 태그 추가 함수 (중복만 방지)
  function addTag(tagText) {
    if (!tagText || addedTags.has(tagText)) return;

    addedTags.add(tagText);

    const tag = document.createElement("div");
    tag.className = "added-tag";
    tag.textContent = tagText;

    const delBtn = document.createElement("span");
    delBtn.className = "tag-delete";
    delBtn.innerHTML = "&times;";

    delBtn.onclick = () => {
      addedTags.delete(tagText);
      tag.remove();
      updateHiddenInput();

      tagLinks.forEach(link => {
        if (link.textContent.trim() === tagText) {
          link.classList.remove("clicked");
        }
      });
    };

    tag.appendChild(delBtn);
    outputArea.appendChild(tag);
    updateHiddenInput();
  }

  // 인풋 기반 추가 (언어 제한 없음)
  function addTagFromInput() {
    const value = input.value.trim();
    const tagText = `#${value}`;
    if (!value) return;
    addTag(tagText);
    input.value = "";
  }

  // Enter 키로 입력
  input.addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
      e.preventDefault();
      addTagFromInput();
    }
  });

  // + 버튼 클릭
  addBtn.addEventListener("click", addTagFromInput);

  // 아래 해시태그 클릭 시 추가
  tagLinks.forEach(link => {
    link.addEventListener("click", function(e) {
      e.preventDefault();
      const tagText = this.textContent.trim();
      addTag(tagText);
      this.classList.add("clicked");
    });
  });
</script>


<!-- 
비밀번호(pw1) 8자 이상 입력되지 않을 시
1. border 붉은색 표시, "8자 이상 입력하셔야 합니다." 문구 출력
2. pw2에 문구 입력해도 변화 없음

비밀번호 확인(pw2) pw1과 일치하지 않을 시
border 붉은색 표시, "비밀번호가 일치하지 않습니다." 문구 출력

비밀번호 확인(pw2) pw1과 일치할 시
border 초록색 표시, "비밀번호가 일치합니다." 문구 출력
 -->
<script>
  const pwInput = document.querySelector("input[name='pw']");
  const pw2Input = document.querySelector("input[name='pw2']");

  const pwWarning = document.createElement("div");
  pwWarning.style.color = "red";
  pwWarning.style.fontSize = "15px";
  pwWarning.style.marginTop = "20px";
  pwWarning.style.marginLeft = "15px";
  pwWarning.textContent = "8자 이상 입력하셔야 합니다.";

  const matchMessage = document.createElement("div");
  matchMessage.style.fontSize = "15px";
  matchMessage.style.marginTop = "20px";
  matchMessage.style.marginLeft = "15px";

  function validatePwLength() {
    const pw = pwInput.value.trim();
    if (pw.length < 8) {
      
      pwInput.style.border = "1.5px solid red";
      if (!pwInput.parentNode.contains(pwWarning)) {
        pwInput.parentNode.appendChild(pwWarning);
      }
      return false;
    } else {
      pwInput.style.border = "";
      if (pwInput.parentNode.contains(pwWarning)) {
        pwInput.parentNode.removeChild(pwWarning);
      }
      return true;
    }
  }

  pwInput.addEventListener("blur", validatePwLength);

  pw2Input.addEventListener("keyup", function () {
    const pw = pwInput.value.trim();
    const pw2 = pw2Input.value.trim();

    // 먼저 pw가 유효한 길이인지 확인
    if (pw.length < 8) {
      pw2Input.style.border = "";
      if (pw2Input.parentNode.contains(matchMessage)) {
        pw2Input.parentNode.removeChild(matchMessage);
      }
      return;
    }

    // pw2 비교
    if (pw2 === "") {
      pw2Input.style.border = "";
      if (pw2Input.parentNode.contains(matchMessage)) {
        pw2Input.parentNode.removeChild(matchMessage);
      }
    } else if (pw === pw2) {
      
      pw2Input.style.border = "1.5px solid green";
      matchMessage.textContent = "비밀번호가 일치합니다.";
      matchMessage.style.color = "green";
      if (!pw2Input.parentNode.contains(matchMessage)) {
        pw2Input.parentNode.appendChild(matchMessage);
      }
    } else {
      
      pw2Input.style.border = "1.5px solid red";
      matchMessage.textContent = "비밀번호가 일치하지 않습니다.";
      matchMessage.style.color = "red";
      if (!pw2Input.parentNode.contains(matchMessage)) {
        pw2Input.parentNode.appendChild(matchMessage);
      }
    }
  });
</script>


<!-- id 중복체크-->
<script>
  $(document).ready(function() {
  $('#checkIdBtn').click(function(e) {
    e.preventDefault();

    const userId = $('input[name="id"]').val().trim();
    if (userId === "") {
      alert("아이디를 입력해주세요.");
      return;
    }

    $.ajax({
      url: '/check-id',  // 서버에 아이디 중복 체크 요청을 보내는 URL
      method: 'POST',
      data: { id: userId },
      dataType: 'json',
      success: function(response) {
        // 서버에서 { available: true } 또는 { available: false } 형태로 응답한다고 가정
        if (response.available) {
          alert("사용 가능한 아이디입니다.");
          $('input[name="id"]').css('border', '2px solid green');
        } else {
          alert("사용 불가능한 아이디입니다.");
          $('input[name="id"]').css('border', '2px solid red');
        }
      },
      error: function() {
        alert("서버와 통신 중 오류가 발생했습니다. 나중에 다시 시도해주세요.");
      }
    });
  });
});
</script>

<!-- 필수항목 기입 -->
<script>
  document.querySelector("#group_button_2").addEventListener("click", function () {
  const name = document.querySelector("input[name='name']").value.trim();
  const id = document.querySelector("input[name='id']").value.trim();
  const pw = document.querySelector("input[name='pw']").value.trim();
  const pw2 = document.querySelector("input[name='pw2']").value.trim();
  const email1 = document.querySelector("input[name='email1']").value.trim();
  const email2 = document.querySelector("input[name='email2']").value.trim();

  if (!name || !id || !pw || !pw2 || !email1 || !email2) {
    alert("모든 필수 항목을 입력해주세요.");
    return;
  }

  if (pw.length < 8) {
    alert("비밀번호는 8자 이상이어야 합니다.");
    return;
  }

  if (pw !== pw2) {
    alert("비밀번호가 일치하지 않습니다.");
    return;
  }

  document.infoFrm.submit(); // 유효성 검사를 통과한 경우에만 제출
});
</script>



<!-- email 선택시 자동입력 및 수정 불가-->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const emailSelect = document.querySelector(".email-select");
    const email2Input = document.querySelector(".email2");

    emailSelect.addEventListener("change", function () {
      const selected = this.value;

      if (selected === "직접입력") {
        email2Input.value = "";
        email2Input.readOnly = false; // 입력 가능하도록 설정
        email2Input.focus();
      } else {
        email2Input.value = selected;
        email2Input.readOnly = true; // 수정 못 하도록 설정
      }
    });
  });
</script>

</html>